#!/usr/bin/env python3
"""
QUICK START - Sistema de Base de Datos del Bot
Start the bot with database system and analytics dashboard active
"""

import sys
import os
from pathlib import Path

print("""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                    â•‘
â•‘        ğŸ¤– AI Trading Bot with Database System                    â•‘
â•‘        Production Ready - Version 2.0                             â•‘
â•‘                                                                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ OPCIÃ“N 1: INICIO RECOMENDADO (Con verificaciÃ³n)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  python run_bot_with_db.py

  âœ… Inicializa base de datos
  âœ… Muestra estadÃ­sticas 
  âœ… Abre UI con Analytics activa


ğŸ¯ OPCIÃ“N 2: INICIO DIRECTO
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  streamlit run app/ui_improved.py

  Abre: http://localhost:8501
  Tab: "ğŸ“‰ Analytics" para ver datos histÃ³ricos


ğŸ¯ OPCIÃ“N 3: MIGRAR DATOS HISTÃ“RICOS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  python migrate_trades.py --days 90

  âœ… Descarga 90 dÃ­as de histÃ³rico desde MT5
  âœ… Guarda en base de datos
  âœ… Analytics muestra datos histÃ³ricos


ğŸ“Š ACCEDIENDO A ANALYTICS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Abre: http://localhost:8501
2. Click en tab: "ğŸ“‰ Analytics"
3. Explora 5 sub-tabs:

   â€¢ Performance: Equity curve, P&L, win rate
   â€¢ Trade Analysis: Filtros, por sÃ­mbolo, tabla completa
   â€¢ AI Decisions: ComparaciÃ³n motores, confianza
   â€¢ Analysis History: Indicadores tÃ©cnicos, tendencias
   â€¢ System Stats: Health check, conteos, resumen


ğŸ“ˆ DATOS DISPONIBLES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… Trades: {ticket, symbol, type, volume, prices, P&L}
âœ… Decisiones AI: {action, confidence, engine, sources}
âœ… AnÃ¡lisis: {RSI, MACD, Bollinger, sentiment, signal}
âœ… MÃ©tricas: {win rate, profit factor, max drawdown}


ğŸ” VERIFICAR SISTEMA
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  python init_database.py

  âœ… Verifica inicializaciÃ³n
  âœ… Muestra estadÃ­sticas de BD
  âœ… Confirma integraciones activas


ğŸ“ ESTRUCTURA DE ARCHIVOS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

database.py
â”œâ”€â”€ DatabaseManager class
â”œâ”€â”€ 5 tablas SQLite
â”œâ”€â”€ Auto-save en anÃ¡lisis, decisiones, trades

pages_database_analytics.py
â”œâ”€â”€ 5 tabs de visualizaciÃ³n
â”œâ”€â”€ Plotly charts
â”œâ”€â”€ Pandas tables
â””â”€â”€ Filtros interactivos

ui_improved.py
â”œâ”€â”€ 6 tabs principales
â”œâ”€â”€ Tab "ğŸ“‰ Analytics" agregada
â”œâ”€â”€ Todas las features integradas
â””â”€â”€ Error handling incluido


ğŸš€ FLUJO COMPLETO
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Bot ejecuta anÃ¡lisis (cada 30s)
   â†“ db.save_analysis() â†’ analysis_history

2. Smart router toma decisiÃ³n
   â†“ db.save_ai_decision() â†’ ai_decisions

3. Si hay seÃ±al, ejecuta trade
   â†“ db.save_trade() â†’ trades (status='open')

4. Cierra cuando condiciÃ³n se cumple
   â†“ db.update_trade() â†’ trades (status='closed', profit)

5. Analytics muestra todo en tiempo real
   â†“ GrÃ¡ficos, tablas, mÃ©tricas
   â†“ Exportable a CSV


âœ¨ FUNCIONALIDADES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… Enhanced AI con bÃºsqueda web
âœ… Smart router (Enhanced â†’ Simple fallback)
âœ… Base de datos SQLite completa
âœ… Auto-saving de anÃ¡lisis, decisiones, trades
âœ… Analytics dashboard en tiempo real
âœ… 5 tabs de visualizaciÃ³n
âœ… Filtros interactivos
âœ… ExportaciÃ³n a CSV
âœ… Migration tool para histÃ³rico
âœ… Health check & monitoring


ğŸ“š DOCUMENTACIÃ“N
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

DATABASE_SYSTEM.md      â†’ Detalles tÃ©cnicos del esquema
DATABASE_USAGE.md       â†’ GuÃ­a de usuario con ejemplos
SISTEMA_COMPLETO.md     â†’ Resumen del sistema completo
IMPLEMENTACION_COMPLETADA.md â†’ Checklist de completaciÃ³n


ğŸ¯ COMANDOS RÃPIDOS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Iniciar bot con BD:         python run_bot_with_db.py
Iniciar UI directa:         streamlit run app/ui_improved.py
Verificar BD:               python init_database.py
Migrar histÃ³rico:           python migrate_trades.py --days 90
Migrar sÃ­mbolos especÃ­ficos: python migrate_trades.py --symbols EURUSD,XRPUSD


ğŸ’¾ UBICACIÃ“N BASE DE DATOS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

File: data/trading_history.db
Type: SQLite3
Size: Crece con histÃ³rico (empieza ~1 MB)
Backup: Copiar archivo a otro lugar para respaldo


ğŸ› TROUBLESHOOTING
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Problema: Analytics tab vacÃ­o
SoluciÃ³n: 
  1. Espera 30s para primer anÃ¡lisis
  2. Refresca pÃ¡gina (F5)
  3. Verifica logs

Problema: Base de datos no inicializa
SoluciÃ³n:
  1. python init_database.py
  2. Verifica que data/ directory existe
  3. Revisa permisos de carpeta

Problema: No se guardan trades
SoluciÃ³n:
  1. Verifica que bot estÃ¡ corriendo
  2. Revisa logs/database.log
  3. Ejecuta: python init_database.py


ğŸ“ SOPORTE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Errores SQL: Ver app/core/database.py
Errors UI: Ver logs/streamlit_*.log
Logic: Ver app/trading/integrated_analysis.py, app/ai/smart_decision_router.py


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    Â¡LISTO PARA OPERAR!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Comando recomendado:

    python run_bot_with_db.py

Abre http://localhost:8501 â†’ Tab "ğŸ“‰ Analytics"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
""")
